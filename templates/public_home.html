<!DOCTYPE html>
<html lang="kn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡≤π‡≥Å‡≤≥‡≤ø‡≤Ø‡≤æ‡≤∞‡≥Å ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‡≤∏‡≤Æ‡≤æ‡≤ö‡≤æ‡≤∞</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header class="topbar">
  <div class="headerWrap">

    <div class="leftLogo">
      <img src="{{ url_for('static', filename='logo.png') }}" class="siteLogoBig">
    </div>

    <div class="centerTitle">
      <h1 class="siteTitleBig">‡≤π‡≥Å‡≤≥‡≤ø‡≤Ø‡≤æ‡≤∞‡≥Å ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‡≤∏‡≤Æ‡≤æ‡≤ö‡≤æ‡≤∞</h1>
      <p class="siteSub">‡≤ó‡≥ç‡≤∞‡≤æ‡≤Æ‡≥Ä‡≤£ ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‚Ä¢ ‡≤∏‡≥ç‡≤•‡≤≥‡≥Ä‡≤Ø ‡≤Ö‡≤™‡≥ç‡≤°‡≥á‡≤ü‡≥ç</p>
    </div>

    <div class="rightActions">
      <input type="text" id="searchInput" placeholder="‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø..." class="searchBox">
      <a href="/editor/login" class="btn">Editor</a>
    </div>

  </div>
</header>

<nav class="menu">
  <a class="active" href="/">‡≤Æ‡≥Å‡≤ñ‡≤™‡≥Å‡≤ü</a>
  <a href="/category/‡≤∏‡≥ç‡≤•‡≤≥‡≥Ä‡≤Ø">‡≤∏‡≥ç‡≤•‡≤≥‡≥Ä‡≤Ø</a>
  <a href="/category/‡≤∞‡≤æ‡≤ú‡≤ï‡≥Ä‡≤Ø">‡≤∞‡≤æ‡≤ú‡≤ï‡≥Ä‡≤Ø</a>
  <a href="/category/‡≤∞‡≥à‡≤§ ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø">‡≤∞‡≥à‡≤§ ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø</a>
  <a href="/category/‡≤∂‡≤ø‡≤ï‡≥ç‡≤∑‡≤£">‡≤∂‡≤ø‡≤ï‡≥ç‡≤∑‡≤£</a>
  <a href="/category/‡≤ï‡≥ç‡≤∞‡≥Ä‡≤°‡≥Ü">‡≤ï‡≥ç‡≤∞‡≥Ä‡≤°‡≥Ü</a>
</nav>

{% if breaking_list|length > 0 %}
<div class="breaking">
  <span class="breakingTag">BREAKING</span>
  <marquee behavior="scroll" direction="left">
    {% for b in breaking_list %} {{ b["title"] }} ‚Ä¢ {% endfor %}
  </marquee>
</div>
{% endif %}

<div class="container">
  <section class="layout">

    <!-- ‚úÖ Latest News -->
    <div>
      <h2 class="secHead">‡≤á‡≤§‡≥ç‡≤§‡≥Ä‡≤ö‡≤ø‡≤® ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø</h2>

      <section class="grid" id="newsGrid">
        {% for n in news_list %}
          <div class="card" data-title="{{ n['title'] }}">

            <!-- ‚úÖ Thumbnail FIX (fallback if missing/broken) -->
            {% if n["thumb"] %}
              <img src="{{ n['thumb'] }}" class="thumb"
                   onerror="this.onerror=null;this.src='{{ url_for('static', filename='logo.png') }}';">
            {% else %}
              <img src="{{ url_for('static', filename='logo.png') }}" class="thumb">
            {% endif %}

            <span class="tag">{{ n["category"] }}</span>

            <h3>
              <a href="/news/{{n['id']}}">{{ n["title"] }}</a>
            </h3>

            <div class="newsMetaRow">
              <p class="date">üïí {{ n["created_at"] }} ‚Ä¢ üëÅ {{ n["views"] }}</p>

              <!-- ‚úÖ Share buttons (ALL + WhatsApp + Copy) -->
              <div style="display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-start;">
                <button class="shareMini"
                  onclick="shareLink('/news/{{n['id']}}','{{ n['title']|e }}')">
                  üîó Share
                </button>

                <button class="shareMini"
                  onclick="shareWhatsApp('/news/{{n['id']}}','{{ n['title']|e }}')">
                  üì≤ WhatsApp
                </button>

                <button class="shareMini"
                  onclick="copyNews('/news/{{n['id']}}')">
                  üìã Copy
                </button>
              </div>

            </div>
          </div>
        {% else %}
          <p>‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‡≤á‡≤≤‡≥ç‡≤≤</p>
        {% endfor %}
      </section>
    </div>

    <!-- ‚úÖ Right Panel -->
    <aside class="trendBox">
      <h2 class="secHead">‡≤ü‡≥ç‡≤∞‡≥Ü‡≤Ç‡≤°‡≤ø‡≤Ç‡≤ó‡≥ç ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø</h2>

      <div id="trendList">
        {% for n in trending %}
          <a class="trendItem" href="/news/{{n['id']}}" data-title="{{ n['title'] }}">
            <span class="trendNo">{{ loop.index }}</span>
            <div>
              <div class="trendTitle">{{ n["title"] }}</div>
              <div class="trendMeta">{{ n["category"] }} ‚Ä¢ üëÅ {{ n["views"] }}</div>
            </div>
          </a>
        {% endfor %}
      </div>
    </aside>

  </section>
</div>

<!-- ‚úÖ Bottom Section (separate from news) -->
<section class="bottomSection">

  <!-- ‚úÖ Contact + Editor -->
  <div class="contactBar">
    <a class="contactBtn" href="tel:9448760070">üìû Contact: 9448760070</a>

    <span class="contactBtn editorBtn">
      ‚úç Editor: <b>Narendra Babu Huliyar</b>
    </span>
  </div>

  <!-- ‚úÖ Follow Us -->
  <div class="rightFollow">
    <h3 class="rightTitle">Follow Us</h3>

    <div class="followRow">

      <!-- Facebook -->
      <a class="socialBtn fb"
         href="https://www.facebook.com/share/g/189BVq5vVs/"
         target="_blank">
        Facebook
      </a>

      <!-- YouTube -->
      <a class="socialBtn yt"
         href="https://youtube.com/@huliyarbabu?si=v4svNXVXiIMZP1zu"
         target="_blank">
        YouTube
      </a>

      <!-- Share site -->
      <button class="socialBtn share" onclick="shareSite()">üîó Share</button>

      <!-- Copy site -->
      <button class="socialBtn share" onclick="copySite()">üìã Copy</button>

    </div>
  </div>

</section>

<footer class="footer">¬© 2026 ‡≤π‡≥Å‡≤≥‡≤ø‡≤Ø‡≤æ‡≤∞‡≥Å ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‡≤∏‡≤Æ‡≤æ‡≤ö‡≤æ‡≤∞</footer>

<script>
  // ‚úÖ Search
  const cards = document.querySelectorAll(".card");
  const trendItems = document.querySelectorAll(".trendItem");
  const searchInput = document.getElementById("searchInput");

  function searchFilter() {
    const q = (searchInput.value || "").trim().toLowerCase();

    cards.forEach(card => {
      const title = (card.dataset.title || "").trim().toLowerCase();
      card.style.display = title.includes(q) ? "block" : "none";
    });

    trendItems.forEach(item => {
      const title = (item.dataset.title || "").trim().toLowerCase();
      item.style.display = title.includes(q) ? "flex" : "none";
    });
  }
  searchInput.addEventListener("input", searchFilter);


  // ‚úÖ helpers
  function buildAbsoluteUrl(path){
    return window.location.origin + path;
  }

  // ‚úÖ Share (ALL apps)
  function shareLink(path, title){
    const url = buildAbsoluteUrl(path);
    const data = { title: title, text: title, url: url };

    if(navigator.share){
      navigator.share(data);
    } else {
      navigator.clipboard.writeText(url);
      alert("‚úÖ Link copied!");
    }
  }

  // ‚úÖ WhatsApp share (forces thumbnail)
  function shareWhatsApp(path, title){
    const url = buildAbsoluteUrl(path);

    // WhatsApp caches previews, so we add unique param
    const finalUrl = url + (url.includes("?") ? "&" : "?") + "v=" + Date.now();

    const wa = "https://wa.me/?text=" + encodeURIComponent(title + "\n" + finalUrl);
    window.open(wa, "_blank");
  }

  // ‚úÖ Copy link
  function copyNews(path){
    const url = buildAbsoluteUrl(path);
    navigator.clipboard.writeText(url);
    alert("‚úÖ Link copied!");
  }

  // ‚úÖ Share site
  function shareSite(){
    const url = window.location.href;
    const title = "‡≤π‡≥Å‡≤≥‡≤ø‡≤Ø‡≤æ‡≤∞‡≥Å ‡≤∏‡≥Å‡≤¶‡≥ç‡≤¶‡≤ø ‡≤∏‡≤Æ‡≤æ‡≤ö‡≤æ‡≤∞";
    const data = { title: title, text: title, url: url };

    if(navigator.share){
      navigator.share(data);
    } else {
      navigator.clipboard.writeText(url);
      alert("‚úÖ Link copied!");
    }
  }

  // ‚úÖ Copy site
  function copySite(){
    const url = window.location.href;
    navigator.clipboard.writeText(url);
    alert("‚úÖ Link copied!");
  }
</script>

</body>
</html>

